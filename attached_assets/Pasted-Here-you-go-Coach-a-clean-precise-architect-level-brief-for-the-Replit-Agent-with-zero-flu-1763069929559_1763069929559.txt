Here you go, Coach ‚Äî **a clean, precise, architect-level brief for the Replit Agent**, with zero fluff, zero ambiguity, and no risk of breaking the app.

This tells the agent EXACTLY what Phase 5 is, what is missing, and what must be implemented.

---

# ‚úÖ **REPLIT AGENT IMPLEMENTATION BRIEF ‚Äî *PHASE 5 (DIET PICKERS)*

Fix Both New Diet Boards (Lifestyle & Clinical)**

### **Summary of the Problem**

We created two new pages:

* `LifestyleDietMenuBuilder.tsx`
* `ClinicalLifestyleDietMenuBuilder.tsx`

Both pages **ONLY display a dropdown**, but they do **NOT** load the ingredient picker, do **NOT** support adding food, do **NOT** show the meal board, and do **NOT** wire into the AI meal generator.

Phase 5 was supposed to make these pages behave like the existing:

* **DiabeticMenuBuilder**
* **GLP1MealBuilder**
* **WeeklyMealBoard**

‚Ä¶but using **diet-specific ingredient pickers** instead of general ingredients.

Right now, **Phase 5 is NOT implemented**.

We need the agent to complete it.

---

# ‚úÖ **WHAT ALREADY EXISTS (Agent can inspect)**

### **Diet Config Files (DONE)**

These files contain the ingredient lists:

```
client/src/data/lifestyleDietPickerConfig.ts
client/src/data/clinicalDietPickerConfig.ts
```

They both export objects like:

```ts
{
  mediterranean: { proteins: [...], starchyCarbs: [...], ... },
  vegan: { ... },
  ...
}
```

### **MealIngredientPicker (Supports Diet Inputs)**

`client/src/components/MealIngredientPicker.tsx`
Already accepts:

```ts
dietConfig?: DietConfig
dietType?: string
```

And uses dietConfig ingredients when present.
**This file is correct. Do not modify it.**

---

# ‚ùå **WHAT IS MISSING (Agent must implement)**

### **1. The two new builders never render MealIngredientPicker**

Right now both pages only contain a dropdown + header.

They do **NOT** render ingredient pickers, snack pickers, add-meal buttons, or meal cards.

### **2. No dietConfig is passed down**

They must send:

```ts
dietConfig={lifestyleDietPickerConfig[selectedDiet]}
dietType={selectedDiet}
```

or for clinical:

```ts
dietConfig={clinicalDietPickerConfig[selectedDiet]}
dietType={selectedDiet}
```

### **3. No meal board is rendered**

The two builders should use **the same UI layout and same components** as:

* DiabeticMenuBuilder
* GLP1MealBuilder

### **4. No AI generation hook connected**

The picker must generate meals just like ALL other boards.

### **5. No ‚Äúchoose a diet first‚Äù placeholder**

When no diet is selected:

Show a black-glass placeholder card:

> **Please choose a diet to continue**

Just like all other empty state cards.

---

# ‚úÖ **WHAT THE AGENT MUST DO (Clear Step-By-Step)**

---

## **STEP 1 ‚Äî Clone UI Layout from DiabeticMenuBuilder**

Inside both new files, replicate the SAME structure:

* Header
* Add Meal button
* Snack card
* Day summary
* AI Modal logic
* MealIngredientPicker wiring
* MealCard rendering

BUT instead of using generic ingredients, you must supply:

```ts
dietConfig={lifestyleDietPickerConfig[selectedDiet]}
dietType={selectedDiet}
```

or

```ts
dietConfig={clinicalDietPickerConfig[selectedDiet]}
dietType={selectedDiet}
```

> ‚ö†Ô∏è **Do NOT copy guardrails from Diabetic or GLP.**
> These diet boards DO NOT use guardrails.

---

## **STEP 2 ‚Äî Add Empty State**

If no diet is selected:

Render ONLY:

```
<div>Choose a diet to continue</div>
```

Centered.
Black-glass background.
Same style as other empty states.

---

## **STEP 3 ‚Äî Wire AI Meal Generation**

`MealIngredientPicker` already sends:

```ts
dietType
ingredients[]
```

The backend already accepts the payload.
**No backend changes required.**

Just ensure the picker is actually invoked.

---

## **STEP 4 ‚Äî Render Meal Cards (Same as other boards)**

Each generated meal should be saved to the board using the same mechanism as:

* DiabeticMenuBuilder ‚Üí `addMealToBoard()`
* GLP1MealBuilder ‚Üí same function

You can copy the logic and reuse the shared helpers like:

```ts
addMealToBoard(mealSlot, mealData)
```

---

# ‚ö†Ô∏è **VERY IMPORTANT ‚Äî DO NOT TOUCH ANYTHING ELSE**

Do **not** modify:

* snack cards
* macro calculator
* guardrails
* database
* routes
* other meal boards

This Phase ONLY affects:

‚úî `LifestyleDietMenuBuilder.tsx`
‚úî `ClinicalLifestyleDietMenuBuilder.tsx`

Nothing else.

---

# üöÄ **FINAL MESSAGE FOR THE AGENT**

**"Complete Phase 5.
Make the two new diet boards fully functional meal generators
with diet-specific ingredient pickers, AI meal creation,
and full meal card rendering ‚Äî identical to Diabetic/GLP boards.
Only diet ingredients change."**

---

Coach, this is the correct, clean, architect-level brief.
You can paste this directly to the Replit Agent.

Let me know when you're ready to validate the implementation.
