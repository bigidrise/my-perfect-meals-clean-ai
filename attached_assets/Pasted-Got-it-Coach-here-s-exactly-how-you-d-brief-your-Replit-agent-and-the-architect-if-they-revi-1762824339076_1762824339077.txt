Got it, Coach ‚Äî here‚Äôs exactly how you‚Äôd brief your **Replit agent** (and the architect if they review the pull). It‚Äôs written in the precise language and structure dev teams understand, while making sure **they do not touch a pixel** of your layout or design.

---

## üß© REPL.IT AGENT INSTRUCTION ‚Äì RESTAURANT GUIDE FUNCTIONAL UPGRADE

### üîí SCOPE & RESTRICTIONS

**DO NOT ALTER ANY DESIGN OR AESTHETIC ELEMENTS.**
The UI, styling, colors, animation, borders, spacing, gradients, shadows, cards, and progress bars are **locked and final.**

This update is **functional only**, focused exclusively on the *logic layer* inside the Restaurant Guide section (currently labeled **‚ÄúRestaurant Meal Generator‚Äù**).
No other components or pages are to be touched, especially the **Find Meals Near Me** section above it.

---

### üéØ OBJECTIVE

We are upgrading the Restaurant Guide‚Äôs logic to make it smarter and more conversational:

**Old behavior:**

* Single input field (‚ÄúRestaurant or cuisine‚Äù)
* Calls `/api/restaurants/analyze-menu`
* Returns AI-generated meals based on keyword matching and cuisine type

**New behavior:**

* Two input fields:

  1. **What are you craving?** (e.g., ‚Äúchicken,‚Äù ‚Äúsalmon,‚Äù ‚Äúpasta‚Äù)
  2. **Where are you going?** (e.g., ‚ÄúCheesecake Factory,‚Äù ‚ÄúP.F. Chang‚Äôs‚Äù)
* Calls a new endpoint: `/api/restaurants/guide`
* The backend handles:

  * Google Places lookup to confirm the restaurant and get metadata
  * GPT-5 prompt combining both inputs (restaurant + craving)
  * Returns JSON with 2‚Äì3 menu recommendations and nutrition estimates

Everything else ‚Äî progress bar, caching, badges, and animations ‚Äî remains untouched and fully functional.

---

### üß† NEW SECTION NAME

Rename this section **from:**

> Restaurant Meal Generator
> **to:**
> Smart Restaurant Guide
> **Subtitle:**
> ‚ÄúPick your craving and restaurant to get AI-powered healthy choices.‚Äù

This label change is *visual text only* ‚Äî do **not** modify the underlying component structure or CSS.

---

### üß∞ REQUIRED CHANGES

#### 1. Add a new state variable

```js
const [cravingInput, setCravingInput] = useState("");
```

#### 2. Update the input area

Place a new input **above** the existing restaurant input (same className and style rules) with:

```js
placeholder="e.g. chicken, pasta, salmon"
value={cravingInput}
onChange={(e) => setCravingInput(e.target.value)}
```

Styling must mirror the existing restaurant input exactly ‚Äî copy the className attributes verbatim.

#### 3. Update the `handleSearch` logic

```js
if (!cravingInput.trim() || !restaurantInput.trim()) {
  toast({ title: "Missing Information", description: "Please enter both a food craving and a restaurant name.", variant: "destructive" });
  return;
}

generateMealsMutation.mutate({
  restaurantName: restaurantInput,
  craving: cravingInput,
});
```

#### 4. Update the mutation

Repoint the `useMutation` call to:

```js
mutationFn: async (params: { restaurantName: string; craving: string }) => {
  return apiRequest("/api/restaurants/guide", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      restaurant: params.restaurantName,
      craving: params.craving,
      userId: localStorage.getItem("userId") || "1",
    }),
  });
},
```

#### 5. Maintain the caching system

No changes to the caching logic ‚Äî reuse the existing localStorage cache (`restaurantGuide.cache.v1`) structure.

#### 6. Maintain the progress bar + ticker

Do not modify timing intervals, visuals, or text.
Keep the current 0‚Äì90% ticker logic intact.

---

### üß© BACKEND INTEGRATION REFERENCE

The new endpoint `/api/restaurants/guide` should return:

```json
{
  "restaurant": { "name": "P.F. Chang's", "address": "...", "rating": 4.5, "website": "..." },
  "recommendations": [
    {
      "name": "Chang's Spicy Chicken",
      "description": "Crispy chicken tossed in signature spicy sauce.",
      "calories": 620,
      "protein": 38,
      "carbs": 52,
      "fats": 22,
      "health_score": 7,
      "tip": "Ask for steamed rice instead of fried."
    }
  ]
}
```

Ensure the frontend maps `data.recommendations` exactly like it does now.

---

### ‚úÖ QA CHECKLIST

Before pushing to production, verify:

* Layout, margins, shadows, and colors remain **pixel-identical**
* Inputs are fully responsive (mobile + desktop)
* Progress bar, caching, and toasts still behave identically
* ‚ÄúFind Meals Near Me‚Äù section above remains 100% untouched
* New flow successfully calls `/api/restaurants/guide` and renders the GPT-5 meal cards

---

### üßæ COMMIT MESSAGE TEMPLATE

```
./push.sh "Upgraded Restaurant Guide: dual-input craving+restaurant logic; new Smart Restaurant Guide title; no visual changes"
```

---

Would you like me to include a **short suggested prompt** for the backend GPT-5 call (`/api/restaurants/guide`) at the bottom of this note for the agent to hand to the backend architect? It‚Äôll make sure their API aligns perfectly with your frontend.
