Got it. Here’s a precise, zero-ambiguity **Replit Agent prompt** to create a **separate, lifestyle-focused meal board** by duplicating the existing Athlete board — without touching the original. Follow it step-by-step.

---

# Replit Agent Prompt — Duplicate Athlete Board → Lifestyle Board (Beach Body / Hard Body)

## Objective

Create a **second, independent meal board** for regular users (no trainer/physician tooling). It must look like the Athlete Meal Board but:

* **Removes the macro header/targets at the top**
* **Adds the “Macro Fix Coach” section at the bottom** (protein / fibrous / starchy deficits and one-tap fixes)
* **Reuses the existing Biometrics macro-addition logic for the auto-calculation**
* **Does not** alter colors, gradients, icons, or any visual tokens

This lifestyle board will be linked from the **Planner** page button; the original Athlete board remains available only under **ProCare**.

---

## 0) Guardrails (do these first)

* **Do not modify** the existing Athlete board file used by ProCare.
* **Commit after each major step** with clear messages.
* No visual or theme changes (colors, gradients, hover states, sizes) anywhere.

---

## 1) Duplicate the Athlete Board (new lifestyle board)

1. Locate the Athlete board (likely):
   `client/src/pages/pro/AthleteBoard.tsx`
   If the file path differs, use the file that powers the Athlete Meal Board currently shown from ProCare.

2. Duplicate it to a new lifestyle file (top-level pages folder):
   **New file:** `client/src/pages/BeachBodyMealBoard.tsx`

3. Inside the new file:

   * Update the **default export name** to `BeachBodyMealBoard`.
   * Update any internal page title strings to: **“Beach Body / Hard Body Meal Board”** (display text only).

> Commit: `feat(lifestyle-board): duplicate AthleteBoard to BeachBodyMealBoard (no functional changes)`

---

## 2) Add a new route for the lifestyle board

1. Open `client/src/Router.tsx`.
2. Add a route entry for the new page (keep path simple and unique):

   ```tsx
   import BeachBodyMealBoard from "@/pages/BeachBodyMealBoard";
   // ...
   <Route path="/beach-body-meal-board" component={BeachBodyMealBoard} />
   ```
3. **Do not** change the ProCare/Athlete routes.

> Commit: `feat(routes): add /beach-body-meal-board route`

---

## 3) Point the Planner button to the new lifestyle board

1. Open `client/src/pages/Planner.tsx` (or wherever the Planner menu buttons are defined).
2. Find the **Meal Board** button intended for regular users (not ProCare).
3. Change its nav path to: `"/beach-body-meal-board"`
   (Leave the ProCare button pointing to the existing Athlete board route.)

> Commit: `feat(planner): link Meal Board button to /beach-body-meal-board`

---

## 4) Strip the macro header from the new board only

In `BeachBodyMealBoard.tsx`, **remove** the top macro header / targets section that allows manual macro setting.

* Delete the block that renders macro targets, top “set macros”, or any trainer/physician controls.
* Do **not** remove meal cards, AI buttons, snack modals, shopping list logic, or week/day toggles.

> Commit: `chore(lifestyle-board): remove top macro header (no trainer targets)`

---

## 5) Add “Macro Fix Coach” at the bottom (deficit coach)

1. Create component file if it doesn’t exist yet:
   `client/src/components/MacroFixCoach.tsx`

   ```tsx
   import { useMemo } from "react";
   import { Button } from "@/components/ui/button";
   import { Dumbbell, Leaf, Wheat } from "lucide-react";

   export default function MacroFixCoach({ totals, targets, onFix }) {
     const deficit = useMemo(() => ({
       protein: Math.max((targets?.protein ?? 0) - (totals?.protein ?? 0), 0),
       fibrous: Math.max((targets?.fibrous ?? 0) - (totals?.fibrous ?? 0), 0),
       starchy: Math.max((targets?.starchy ?? 0) - (totals?.starchy ?? 0), 0),
     }), [totals, targets]);

     const show = deficit.protein > 0 || deficit.fibrous > 0 || deficit.starchy > 0;
     if (!show) return null;

     return (
       <div className="mt-8 border border-lime-500/30 bg-black/40 backdrop-blur p-5 rounded-2xl">
         <div className="flex items-center justify-between mb-2">
           <h3 className="text-white text-lg font-semibold">Macro Fix Coach</h3>
           <button
             aria-label="What is this?"
             className="w-7 h-7 rounded-lg border border-white/20 text-white/90 hover:bg-white/10"
             onClick={() => alert(
               "Focus on Protein and Carbs here. Calories and fats are not the priority for this board. " +
               "Fix any shortages below. You can add items to breakfast/lunch/dinner or use the quick add."
             )}
           >?</button>
         </div>

         {deficit.protein > 0 && (
           <p className="text-lime-300 text-sm mb-1">
             You’re short <b>{deficit.protein} g</b> of protein.
           </p>
         )}
         {deficit.starchy > 0 && (
           <p className="text-lime-300 text-sm mb-1">
             You’re short <b>{deficit.starchy} g</b> of starchy carbs.
           </p>
         )}
         {deficit.fibrous > 0 && (
           <p className="text-lime-300 text-sm mb-1">
             You’re short <b>{deficit.fibrous} g</b> of fibrous carbs.
           </p>
         )}

         <div className="flex flex-wrap gap-2 mt-3">
           {deficit.protein > 0 && (
             <Button variant="outline" onClick={() => onFix("protein")} className="flex items-center gap-2">
               <Dumbbell className="h-4 w-4" /> Add Protein
             </Button>
           )}
           {deficit.fibrous > 0 && (
             <Button variant="outline" onClick={() => onFix("fibrous")} className="flex items-center gap-2">
               <Leaf className="h-4 w-4" /> Add Fibrous Carb
             </Button>
           )}
           {deficit.starchy > 0 && (
             <Button variant="outline" onClick={() => onFix("starchy")} className="flex items-center gap-2">
               <Wheat className="h-4 w-4" /> Add Starchy Carb
             </Button>
           )}
         </div>
       </div>
     );
   }
   ```

2. In `BeachBodyMealBoard.tsx`, **import and render** `MacroFixCoach` **after** the “Daily Totals” block and **before** any bottom bars/modals:

   ```tsx
   import MacroFixCoach from "@/components/MacroFixCoach";

   // ...
   <MacroFixCoach
     totals={totals}      // same totals object already used in the page
     targets={targets}    // existing computed targets (no UI shown at top)
     onFix={(type) => openMacroFix(type)} // implement below
   />
   ```

> Commit: `feat(lifestyle-board): add Macro Fix Coach to bottom`

---

## 6) Wire “onFix” to the existing Biometrics auto-calc

Goal: when user taps “Add Protein” (etc.), reuse the Biometrics quick-add macro logic that already knows how to convert “50g from chicken” into the correct amounts.

Implementation:

* If you already have a **Macro Quick Add / MacroBridge** modal from Biometrics, import and reuse it here.
  Example hook names you may see: `openQuickAddMacrosModal(type)`, `MacroBridgeFooter`, or a modal in `client/src/components/biometrics/*`.
* Add a simple wrapper in `BeachBodyMealBoard.tsx`:

  ```tsx
  function openMacroFix(kind: "protein" | "fibrous" | "starchy") {
    // Reuse the SAME modal/logic from Biometrics.
    // If there’s an exported opener utility, call it here.
    // Otherwise, mount the modal component and set props to `kind`.
    window.dispatchEvent(new CustomEvent("macrofix:open", { detail: { kind, source: "beach-body-board" } }));
  }
  ```
* If a direct modal import is needed, mount it near other modals (like AddSnackModal) with props bound to `kind`. **Do not duplicate the nutrition math.**

> Commit: `feat(lifestyle-board): wire Macro Fix to Biometrics quick-add logic (no duplicated math)`

---

## 7) QA Checklist (must pass)

* Planner → Meal Board button opens **/beach-body-meal-board** (new board).
* ProCare → Athlete board remains **unchanged** and opens the original file/route.
* New board shows **no macro header at the top**.
* After meals are chosen, **Macro Fix Coach** appears only if protein or carbs are short.
* “?” button shows instructional text (calories/fats not the focus here).
* Tapping “Add Protein/Fibrous/Starchy” opens the **existing** Biometrics macro-add flow and auto-calculates amounts (e.g., “50g from chicken” resolves automatically).
* No color/gradient/icon changes anywhere.

---

## Rollback plan

If anything affects the original Athlete board:

1. Revert changes to `client/src/pages/pro/AthleteBoard.tsx` and its route.
2. Keep only the new files and the Planner link.

---

**End of prompt.**
