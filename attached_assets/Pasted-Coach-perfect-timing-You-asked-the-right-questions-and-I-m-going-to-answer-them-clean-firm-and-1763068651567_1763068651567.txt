Coach ‚Äî perfect timing. You asked the right questions, and I‚Äôm going to answer them clean, firm, and *exactly* the way the Replit Assistant needs to hear them so we can lock in Phase 5 without the assistant breaking anything.

Below is **your confirmation + exact instructions** the assistant needs.

---

# ‚úÖ **YOUR CONFIRMATIONS + EXACT ANSWERS (This is your ‚ÄúYes‚Äù to all questions)**

Here‚Äôs everything the assistant asked, and here are the answers you should give it **word-for-word** ‚Äî so it moves forward without guessing or touching anything incorrectly.

---

# 1Ô∏è‚É£ **Diet Config Structure Verification**

**YES. The assistant should inspect both files first.**

Tell the assistant:

> ‚ÄúInspect lifestyleDietPickerConfig.ts and clinicalDietPickerConfig.ts to confirm the structure. They each contain 7 diets with the same schema: proteins, starchyCarbs, fibrousCarbs, fats, fruit, and snacks (with 6 snack subcategories). Confirm that shape before wiring anything.‚Äù

No changes yet ‚Äî just a scan to lock the structure.

---

# 2Ô∏è‚É£ **AI Generation Endpoint**

**YES. Add diet info to the AI request.**

Tell the assistant:

> ‚ÄúAdd dietType to the POST body in the AI meal generation request. Also include diet restrictions in the prompt based on the dietConfig being used.‚Äù

This ensures meals are actually compliant.

No other changes to AI are allowed.

---

# 3Ô∏è‚É£ **Empty State Placement**

**YES. Place the empty state EXACTLY here:**

‚úÖ In the **main content area**, replacing the meal cards section
‚ùå NOT in a banner
‚ùå NOT in the modal

Tell the assistant:

> ‚ÄúIf no diet is selected, hide all meal cards and show a centered message in the main content: ‚ÄòPlease choose a diet to continue.‚Äô‚Äù

This avoids weird UX and keeps everything consistent with the hubs.

---

# 4Ô∏è‚É£ **LocalStorage Keys**

**YES. Use these exact keys:**

```
lifestyle-diet-selection
clinical-diet-selection
```

Tell the assistant:

> ‚ÄúPersist the selected diet using localStorage keys: ‚Äòlifestyle-diet-selection‚Äô and ‚Äòclinical-diet-selection‚Äô. On mount, load from these keys.‚Äù

Don‚Äôt invent new keys. Don‚Äôt overwrite other hub data.

---

# 5Ô∏è‚É£ **MealIngredientPicker Integration**

This is the most important part.

Tell the assistant:

> ‚ÄúModify MealIngredientPicker so that if dietConfig is provided, it uses dietConfig‚Äôs ingredients. If no dietConfig is passed, fall back to the existing generic mealIngredients.ts and snackIngredients.ts.‚Äù

### EXACT LOGIC:

```ts
if (dietConfig) {
   // use dietConfig.proteins, dietConfig.starchyCarbs, etc.
} else {
   // fallback to generic ingredients
}
```

### For snacks:

```ts
if (mealSlot === "snacks" && dietConfig) {
   ingredientSource = dietConfig.snacks;
} else if (mealSlot === "snacks") {
   ingredientSource = ALL_SNACK_INGREDIENTS;
}
```

This ensures every meal board stays untouched except the two lifestyle builders.

---

# üéØ **Now Here Is the Exact Message You Should Give the Replit Assistant**

Copy/paste the following as-is:

---

### **üì© MESSAGE FOR REPLIT ASSISTANT ‚Äî Phase 5 Implementation Instructions**

Please continue Phase 5 using the following explicit confirmations:

1. **Inspect the diet config files first**

   * Open `client/src/data/lifestyleDietPickerConfig.ts` and `client/src/data/clinicalDietPickerConfig.ts`.
   * Confirm the structure:

     * proteins
     * starchyCarbs
     * fibrousCarbs
     * fats
     * fruit
     * snacks: sweetTreats, savoryCrunchy, lightGentle, proteinEnergy, drinkables, dessertBites
       Do NOT modify them yet ‚Äî just confirm the structure.

2. **Wire dietConfig into MealIngredientPicker**

   * Add props: `dietConfig?: DietConfig`, `dietType?: string`.
   * If dietConfig is passed ‚Üí use dietConfig‚Äôs ingredients.
   * If no dietConfig ‚Üí fall back to the existing generic ingredient files.
   * For snacks:

     * If mealSlot === "snacks" and dietConfig exists ‚Üí use dietConfig.snacks
     * Else ‚Üí use the generic snackIngredients.ts

3. **Modify LifestyleDietMenuBuilder & ClinicalLifestyleDietMenuBuilder**

   * Add state for selectedDiet
   * Persist using:

     * `lifestyle-diet-selection`
     * `clinical-diet-selection`
   * On mount ‚Üí load from localStorage
   * Pass both dietConfig and dietType into MealIngredientPicker

4. **Empty State Behavior**

   * If no diet is selected:

     * Hide all meal cards
     * Show centered message: ‚ÄúPlease choose a diet to continue.‚Äù
     * Do NOT show any ingredient pickers until a diet is selected.

5. **AI Generation Update**

   * In the AI meal generation request, include:

     * `dietType` (the selected diet)
     * Add dietary restrictions to the prompt based on dietConfig
   * Do NOT modify any other AI routes.

6. **Do NOT touch anything else in the app.**

   * Do not modify snack logic, snack cards, or other boards.
   * All boards already use "snacks" (plural) and are correct.
   * Only wire diet-specific ingredient data into the two new builders.

This completes what‚Äôs required for Phase 5.
Proceed exactly as described.
Stop and ask if you encounter missing structure or unexpected logic.

---

# Coach ‚Äî this is perfect.

Clear, tight, controlled, and safe.

Send it.
