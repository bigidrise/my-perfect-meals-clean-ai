Awesome — here’s a drop-in **Biometrics Guided Tour** that does exactly what you described:

* Shows a **flashing green coach button** when the Biometrics page opens (Coach Mode on).
* Button text: **“Add your weight to start making meals.”**
* Clicking it **scrolls to the Weight section**, displays a short **“Persistent numbers”** explainer, and **highlights the Save button**.
* Clicking **Save** automatically **routes to `/planner`**.
* Clean, DOM-safe: it simply looks for the elements by ID so you don’t have to refactor the page.

---

# 1) Create: `client/src/components/guided/BiometricsGuidedTour.tsx`

```tsx
import { useEffect, useRef, useState } from "react";
import { useLocation } from "wouter";

/**
 * Biometrics Guided Tour
 *
 * How it works:
 * - Renders a floating flashing green CTA at the top of the page when coachMode === "guided".
 * - On click: scrolls to weight section, shows a small "Persistent" info card,
 *   and flashes the Save button.
 * - When the Save button is clicked, auto-navigates to /planner.
 *
 * Requirements on the Biometrics page:
 *   - Add id="weight-section" to the container that holds the weight input.
 *   - Add id="save-weight-btn" to the Save Weight button.
 *   - (Optional) Add id="persistent-info-anchor" near the weight section title/label
 *     to anchor the info card; if missing, the info card will still render below.
 */

const isGuided = () => localStorage.getItem("coachMode") === "guided";

export default function BiometricsGuidedTour() {
  const [, setLocation] = useLocation();
  const [active, setActive] = useState(isGuided());
  const [showPersistentInfo, setShowPersistentInfo] = useState(false);
  const cleanupRef = useRef<() => void>(() => {});

  useEffect(() => {
    if (!active) return;

    // Add a flashing class to Save button after user clicks CTA.
    const saveBtn = document.getElementById("save-weight-btn");

    // Attach a one-time listener to redirect after save click.
    const onSave = () => {
      // slight delay so any save logic can finish
      setTimeout(() => setLocation("/planner"), 350);
    };

    if (saveBtn) {
      saveBtn.addEventListener("click", onSave, { once: true });
    }

    cleanupRef.current = () => {
      if (saveBtn) saveBtn.removeEventListener("click", onSave);
    };

    return () => cleanupRef.current();
  }, [active, setLocation]);

  if (!active) return null;

  const handleStart = () => {
    // Scroll to the weight section
    const weightSection = document.getElementById("weight-section");
    if (weightSection) {
      weightSection.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // Show persistent info card
    setShowPersistentInfo(true);

    // Flash the Save button
    const saveBtn = document.getElementById("save-weight-btn");
    if (saveBtn) {
      saveBtn.classList.add("flash-green-strong");
      // Safety: remove the flash after ~10s if user doesn't click
      setTimeout(() => saveBtn.classList.remove("flash-green-strong"), 10000);
    }
  };

  return (
    <>
      {/* Floating CTA (top center) */}
      <div className="fixed left-1/2 -translate-x-1/2 top-4 z-[60]">
        <button
          onClick={handleStart}
          className="px-4 py-2 rounded-xl text-white font-medium bg-emerald-600/90 border border-emerald-300/40 backdrop-blur flash-green"
        >
          Click to add your weight & start making meals
        </button>
      </div>

      {/* Persistent info card near weight section */}
      {showPersistentInfo && (
        <PersistentInfoCard onClose={() => setShowPersistentInfo(false)} />
      )}
    </>
  );
}

function PersistentInfoCard({ onClose }: { onClose: () => void }) {
  // Try to anchor near an element if provided
  const anchor = typeof window !== "undefined"
    ? document.getElementById("persistent-info-anchor")
    : null;

  // Absolute anchored popover if anchor is present; otherwise a fixed bottom card
  if (anchor) {
    const rect = anchor.getBoundingClientRect();
    const top = Math.max(rect.bottom + window.scrollY + 8, 0);
    const left = Math.max(rect.left + window.scrollX, 16);

    return (
      <div
        style={{ position: "absolute", top, left }}
        className="z-[55] max-w-md"
      >
        <InfoCard onClose={onClose} />
      </div>
    );
  }

  return (
    <div className="fixed left-1/2 -translate-x-1/2 bottom-6 z-[55] max-w-md w-[92vw] sm:w-auto">
      <InfoCard onClose={onClose} />
    </div>
  );
}

function InfoCard({ onClose }: { onClose: () => void }) {
  return (
    <div className="rounded-2xl border border-white/15 bg-black/60 text-white backdrop-blur p-4 shadow-lg">
      <p className="text-sm leading-relaxed">
        <span className="font-semibold">Heads up:</span> your current macros and
        biometrics are <span className="font-semibold">persistent</span> — they
        stay saved until you change them. You can tap the{" "}
        <span className="font-semibold">Persistent</span> label anytime to read
        what it means.
      </p>
      <div className="mt-3 flex items-center justify-end gap-2">
        <button
          onClick={onClose}
          className="px-3 py-1.5 rounded-md bg-white/10 hover:bg-white/15 border border-white/15 text-sm"
        >
          Got it
        </button>
      </div>
    </div>
  );
}
```

---

# 2) Add CSS (pulse styles)

Add these to your global stylesheet (e.g. `client/src/index.css` or `globals.css`):

```css
@keyframes pulseGreen {
  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.65); } /* emerald-500 */
  50% { box-shadow: 0 0 18px 10px rgba(16, 185, 129, 0.25); }
}
.flash-green {
  animation: pulseGreen 1.4s infinite;
  border-radius: 0.75rem;
}

.flash-green-strong {
  animation: pulseGreen 1.1s infinite;
  border-radius: 0.75rem;
  outline: 2px solid rgba(16,185,129,0.55);
  outline-offset: 2px;
}
```

---

# 3) Minimal integration on Biometrics page

Open `client/src/pages/my-biometrics.tsx` and:

**A.** Import the tour component:

```tsx
import BiometricsGuidedTour from "@/components/guided/BiometricsGuidedTour";
```

**B.** Render it near the top of the page output:

```tsx
export default function MyBiometrics() {
  // ...your existing state/hooks

  return (
    <div className="relative">
      {/* Coach Mode overlay (only appears if coachMode === "guided") */}
      <BiometricsGuidedTour />

      {/* Page content... */}
      {/* Add these IDs so the tour can find the right elements: */}
      <section id="weight-section" className="mt-4">
        {/* (Optional) anchor for info card placement */}
        <h3 id="persistent-info-anchor" className="text-white/90 text-lg font-semibold">
          Body Weight
        </h3>

        {/* your weight input(s) ... */}
      </section>

      {/* Your Save button — give it this id */}
      <button id="save-weight-btn" className="mt-4 btn btn-primary">
        Save Weight
      </button>
    </div>
  );
}
```

That’s it.

* If **Coach Mode** is ON (`localStorage.coachMode === "guided"`), users will see the green CTA, get scrolled to weight, see the **persistent** explainer, get a flashing **Save** button, and after saving will be sent straight to **`/planner`**.
* If Coach Mode is OFF, nothing renders; page behaves normally.

---

## Notes for your next step (already accounted for in this design)

* On the **Planner** page, we’ll add a similar tiny component:

  * Flash the top **?** icon → tap → overlay explains each hub;
  * All hub buttons pulse at once; user chooses; next page’s mini-tour begins.
* Inside the **Meal Builder**, we’ll flash **“Create AI Meal”**, open the picker, show a short explainer (“Protein required; carbs/fats optional”), then flash **Done**, return to board, and advance to the next meal slot.

When you’re ready, I’ll hand you **PlannerGuidedTour.tsx** next (same pattern, super easy to drop in).
