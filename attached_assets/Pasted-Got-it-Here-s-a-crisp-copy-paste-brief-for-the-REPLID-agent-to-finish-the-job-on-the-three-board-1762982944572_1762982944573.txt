Got it. Here’s a crisp, copy-paste brief for the REPLID agent to finish the job on the **three boards that were NOT updated** yet.

---

## REPLID Agent Brief — Finish Snack Logic on 3 Boards (no macro card, no protein-first)

### Context

* **Already updated**: Beach/Hard Body Meal Board, Pro/Professional Care Meal Board.
* **NOT updated yet (please update now)**:

  1. **Weekly Meal Board**
  2. **GLP-1 Meal Board**
  3. **Diabetic Meal Board**

These three still show the old snack flow (macro targets + “pick protein first”). They must match the new snack behavior used in the other two boards.

### Goal (snack cards only)

For **snack cards** on the three boards above:

* Remove/hide **macro target setup**.
* Remove **“pick a protein first”** requirement.
* Allow **single-ingredient** generation.
* Ensure snack picker uses **snackIngredients.ts** (6 categories, 15–20 items each).
* Keep visuals/buttons identical; no layout changes.

### Files to check & patch

All three boards invoke the **Create with AI** modal. Patch whichever modal(s) they use. Common locations:

* `client/src/components/modals/AIMealCreatorModal.tsx`  ← most boards
* If a board uses a variant (e.g., `AIMealCreatorModalPro.tsx`, `AIMealCreatorModalAthlete.tsx`), apply the same changes there too.

> Do **not** touch Beach/Hard Body or ProCare — they’re already correct.

### Exact changes (apply to the modal used by these 3 boards)

1. **Hide Macro Targets for Snacks**

```tsx
// wherever macro target UI is rendered:
{formData.mealType !== "snack" && <MacroTargetCard ... />}
```

2. **Remove “Protein First” for Snacks**

```ts
// OLD
if (!selectedProtein) {
  alert("Please pick a protein first!");
  return;
}

// NEW
if (formData.mealType !== "snack" && !selectedProtein) {
  alert("Please pick a protein first!");
  return;
}
```

3. **Allow Single-Ingredient Snacks**

```ts
// OLD (example)
if (formData.ingredients.length < 2) {
  alert("Please pick at least one protein and carb.");
  return;
}

// NEW
if (formData.mealType === "snack" && formData.ingredients.length < 1) {
  alert("Please pick at least one ingredient.");
  return;
}
if (formData.mealType !== "snack" && formData.ingredients.length < 2) {
  alert("Please pick at least one protein and carb.");
  return;
}
```

4. **Use Snack Dataset for Snack Cards**
   At top of the modal:

```ts
import { snackIngredients } from "@/data/snackIngredients";
import { mealIngredients } from "@/data/mealIngredients"; // or existing meal dataset file
```

Swap source dynamically:

```ts
const ingredientSource =
  formData.mealType === "snack" ? snackIngredients : mealIngredients;
```

Use `ingredientSource` wherever categories/items/chips are rendered.

5. **Snack-Specific Prompt (optional but recommended)**

```ts
const prompt =
  formData.mealType === "snack"
    ? `Create a healthy snack idea using ${formData.ingredients.join(", ")}. Keep it quick, fun, portion-smart, and easy to prepare.`
    : `Create a balanced ${formData.mealType} meal with these ingredients: ${formData.ingredients.join(", ")}. Include cooking instructions and macros.`;
```

### Do not change

* Snack card UI (buttons: Create with AI, +Add, Log/Photo).
* DALL·E pipeline (already in place).
* Backend routes, prompts for non-snack meals, or guardrail logic (GLP-1/Diabetic constraints already flow through meal engine).

### Validation checklist (for these 3 boards)

* Snack → **no macro card**, **no protein-first** message.
* Snack can generate from **one** ingredient.
* Snack picker shows **six** categories with **15–20** items each (including **Drinkables** and **Dessert Bites**).
* Results are snack-style; daily macros update as usual.
* No console errors or layout shifts.

### Commit message

```
fix(snack-flow): remove macro targets & protein-first for snacks on Weekly, GLP-1, and Diabetic boards; align with unified snack picker
```

If any of the three boards use a different modal component than `AIMealCreatorModal.tsx`, mirror these exact changes in that modal as well.
